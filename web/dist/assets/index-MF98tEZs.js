import{an as z,B as I,af as A,a5 as D,S as $,aN as _,A as F,aO as U,aA as v,d as V,k as j,r as x,ad as q}from"./index-8Q_9VYoB.js";import{A as h,g as T,t as K,u as S,q as k,z as G,p as J,r as Q,b as R,d as L}from"./base-fLZH5HYv.js";import{P as p}from"./vnode-V_EyjqrJ.js";let m;const Z=e=>{var o;if(!h)return 0;if(m!==void 0)return m;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const s=t.offsetWidth;t.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",t.appendChild(a);const l=a.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),m=s-l,m};function ie(e,o){if(!h)return;if(!o){e.scrollTop=0;return}const t=[];let s=o.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)t.push(s),s=s.offsetParent;const a=o.offsetTop+t.reduce((i,u)=>i+u.offsetTop,0),l=a+o.offsetHeight,n=e.scrollTop,c=n+e.clientHeight;a<n?e.scrollTop=a:l>c&&(e.scrollTop=l-e.clientHeight)}const ue=(...e)=>o=>{e.forEach(t=>{z(t)?t(o):t.value=o})},re=(e,o,t)=>{let s={offsetX:0,offsetY:0};const a=c=>{const i=c.clientX,u=c.clientY,{offsetX:r,offsetY:f}=s,d=e.value.getBoundingClientRect(),y=d.left,w=d.top,O=d.width,P=d.height,Y=document.documentElement.clientWidth,B=document.documentElement.clientHeight,H=-y+r,W=-w+f,N=Y-y-O+r,X=B-w-P+f,b=E=>{const M=Math.min(Math.max(r+E.clientX-i,H),N),C=Math.min(Math.max(f+E.clientY-u,W),X);s={offsetX:M,offsetY:C},e.value&&(e.value.style.transform=`translate(${T(M)}, ${T(C)})`)},g=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",g)},l=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",a)},n=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",a)};I(()=>{A(()=>{t.value?l():n()})}),D(()=>{n()})},de=(e,o={})=>{$(e)||K("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||S("popup"),s=_(()=>t.bm("parent","hidden"));if(!h||k(document.body,s.value))return;let a=0,l=!1,n="0";const c=()=>{setTimeout(()=>{Q(document==null?void 0:document.body,s.value),l&&document&&(document.body.style.width=n)},200)};F(e,i=>{if(!i){c();return}l=!k(document.body,s.value),l&&(n=document.body.style.width),a=Z(t.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,r=G(document.body,"overflowY");a>0&&(u||r==="scroll")&&l&&(document.body.style.width=`calc(100% - ${a}px)`),J(document.body,s.value)}),U(()=>c())},ee=e=>{if(!e)return{onClick:v,onMousedown:v,onMouseup:v};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{t=n.target===n.currentTarget}}},te=R({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:L([String,Array,Object])},zIndex:{type:L([String,Number])}}),oe={click:e=>e instanceof MouseEvent},se="overlay";var ne=V({name:"ElOverlay",props:te,emits:oe,setup(e,{slots:o,emit:t}){const s=S(se),a=i=>{t("click",i)},{onClick:l,onMousedown:n,onMouseup:c}=ee(e.customMaskEvent?void 0:a);return()=>e.mask?j("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:n,onMouseup:c},[x(o,"default")],p.STYLE|p.CLASS|p.PROPS,["onClick","onMouseup","onMousedown"]):q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(o,"default")])}});const me=ne;export{me as E,de as a,ee as b,ue as c,ie as s,re as u};

import{at as e,B as t,ab as o,a6 as n,S as s,b6 as a,A as l,b7 as u,aI as d,d as c,l as r,r as i,aa as m}from"./index-afE12XCz.js";import{P as f,o as p,t as v,u as y,D as h,L as b,A as E,B as x,b as M,d as g}from"./el-button-wvYaTM86.js";import{P as w}from"./focus-trap-5pso-6bw.js";let C;function k(e,t){if(!f)return;if(!t)return void(e.scrollTop=0);const o=[];let n=t.offsetParent;for(;null!==n&&e!==n&&e.contains(n);)o.push(n),n=n.offsetParent;const s=t.offsetTop+o.reduce(((e,t)=>e+t.offsetTop),0),a=s+t.offsetHeight,l=e.scrollTop,u=l+e.clientHeight;s<l?e.scrollTop=s:a>u&&(e.scrollTop=a-e.clientHeight)}const L=(...t)=>o=>{t.forEach((t=>{e(t)?t(o):t.value=o}))},T=(e,s,a)=>{let l={offsetX:0,offsetY:0};const u=t=>{const o=t.clientX,n=t.clientY,{offsetX:s,offsetY:a}=l,u=e.value.getBoundingClientRect(),d=u.left,c=u.top,r=u.width,i=u.height,m=document.documentElement.clientWidth,f=document.documentElement.clientHeight,v=-d+s,y=-c+a,h=m-d-r+s,b=f-c-i+a,E=t=>{const u=Math.min(Math.max(s+t.clientX-o,v),h),d=Math.min(Math.max(a+t.clientY-n,y),b);l={offsetX:u,offsetY:d},e.value&&(e.value.style.transform=`translate(${p(u)}, ${p(d)})`)},x=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",x)},d=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",u)};t((()=>{o((()=>{a.value?s.value&&e.value&&s.value.addEventListener("mousedown",u):d()}))})),n((()=>{d()}))},Y=(e,t={})=>{s(e)||v("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||y("popup"),n=a((()=>o.bm("parent","hidden")));if(!f||h(document.body,n.value))return;let d=0,c=!1,r="0";const i=()=>{setTimeout((()=>{x(null==document?void 0:document.body,n.value),c&&document&&(document.body.style.width=r)}),200)};l(e,(e=>{if(!e)return void i();c=!h(document.body,n.value),c&&(r=document.body.style.width),d=(e=>{var t;if(!f)return 0;if(void 0!==C)return C;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const n=o.offsetWidth;o.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",o.appendChild(s);const a=s.offsetWidth;return null==(t=o.parentNode)||t.removeChild(o),C=n-a,C})(o.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,s=b(document.body,"overflowY");d>0&&(t||"scroll"===s)&&c&&(document.body.style.width=`calc(100% - ${d}px)`),E(document.body,n.value)})),u((()=>i()))},S=e=>{if(!e)return{onClick:d,onMousedown:d,onMouseup:d};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{o=e.target===e.currentTarget}}},H=M({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:g([String,Array,Object])},zIndex:{type:g([String,Number])}});const I=c({name:"ElOverlay",props:H,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const n=y("overlay"),{onClick:s,onMousedown:a,onMouseup:l}=S(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?r("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:a,onMouseup:l},[i(t,"default")],w.STYLE|w.CLASS|w.PROPS,["onClick","onMouseup","onMousedown"]):m("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[i(t,"default")])}});export{I as E,Y as a,S as b,L as c,k as s,T as u};

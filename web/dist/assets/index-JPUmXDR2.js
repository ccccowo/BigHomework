import{c as e,a5 as a,h as t,ax as o,A as l,at as n,M as s,d as r,ap as i,a0 as u,aG as p,aH as d,T as c,B as f,a2 as v,D as m,W as y,o as x,k as b,I as g,F as h,n as w,u as S,r as k,t as z,a as I,w as C,e as F,N as B,ao as E,l as $,L as P,aI as M,v as V,b as _,f as R}from"./index-afE12XCz.js";import{P as j,a0 as A,z as N,i as T,b as H,c as O,d as W,x as K,m as L,U as D,g as G,r as U,j as Y,k as Z,u as q,V as J,e as Q,G as X,l as ee,a as ae,_ as te,w as oe}from"./el-button-wvYaTM86.js";const le=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e),ne=["class","style"],se=/^on[A-Z]/;let re;const ie=`\n  height:0 !important;\n  visibility:hidden !important;\n  ${j&&/firefox/i.test(window.navigator.userAgent)?"":"overflow:hidden !important;"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`,ue=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function pe(e,a=1,t){var o;re||(re=document.createElement("textarea"),document.body.appendChild(re));const{paddingSize:l,borderSize:n,boxSizing:s,contextStyle:r}=function(e){const a=window.getComputedStyle(e),t=a.getPropertyValue("box-sizing"),o=Number.parseFloat(a.getPropertyValue("padding-bottom"))+Number.parseFloat(a.getPropertyValue("padding-top")),l=Number.parseFloat(a.getPropertyValue("border-bottom-width"))+Number.parseFloat(a.getPropertyValue("border-top-width"));return{contextStyle:ue.map((e=>`${e}:${a.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:l,boxSizing:t}}(e);re.setAttribute("style",`${r};${ie}`),re.value=e.value||e.placeholder||"";let i=re.scrollHeight;const u={};"border-box"===s?i+=n:"content-box"===s&&(i-=l),re.value="";const p=re.scrollHeight-l;if(T(a)){let e=p*a;"border-box"===s&&(e=e+l+n),i=Math.max(e,i),u.minHeight=`${e}px`}if(T(t)){let e=p*t;"border-box"===s&&(e=e+l+n),i=Math.min(e,i)}return u.height=`${i}px`,null==(o=re.parentNode)||o.removeChild(re),re=void 0,u}const de=H({id:{type:String,default:void 0},size:O,disabled:Boolean,modelValue:{type:W([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:W([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:K},prefixIcon:{type:K},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:W([Object,Array,String]),default:()=>L({})},autofocus:{type:Boolean,default:!1}}),ce={[D]:e=>s(e),input:e=>s(e),change:e=>s(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},fe=["role"],ve=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],me=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],ye=r({name:"ElInput",inheritAttrs:!1});const xe=oe(te(r({...ye,props:de,emits:ce,setup(s,{expose:r,emit:T}){const H=s,O=i(),W=u(),K=e((()=>{const e={};return"combobox"===H.containerRole&&(e["aria-haspopup"]=O["aria-haspopup"],e["aria-owns"]=O["aria-owns"],e["aria-expanded"]=O["aria-expanded"]),e})),L=e((()=>["textarea"===H.type?xe.b():ye.b(),ye.m(de.value),ye.is("disabled",ce.value),ye.is("exceed",Oe.value),{[ye.b("group")]:W.prepend||W.append,[ye.bm("group","append")]:W.append,[ye.bm("group","prepend")]:W.prepend,[ye.m("prefix")]:W.prefix||H.prefixIcon,[ye.m("suffix")]:W.suffix||H.suffixIcon||H.clearable||H.showPassword,[ye.bm("suffix","password-clear")]:Ae.value&&Ne.value},O.class])),te=e((()=>[ye.e("wrapper"),ye.is("focus",Fe.value)])),oe=((t={})=>{const{excludeListeners:o=!1,excludeKeys:l}=t,n=e((()=>((null==l?void 0:l.value)||[]).concat(ne))),s=a();return e(s?()=>{var e;return A(Object.entries(null==(e=s.proxy)?void 0:e.$attrs).filter((([e])=>!(n.value.includes(e)||o&&se.test(e)))))}:()=>({}))})({excludeKeys:e((()=>Object.keys(K.value)))}),{form:re,formItem:ie}=G(),{inputId:ue}=U(H,{formItemContext:ie}),de=Y(),ce=Z(),ye=q("input"),xe=q("textarea"),be=o(),ge=o(),he=t(!1),we=t(!1),Se=t(!1),ke=t(),ze=o(H.inputStyle),Ie=e((()=>be.value||ge.value)),{wrapperRef:Ce,isFocused:Fe,handleFocus:Be,handleBlur:Ee}=function(e,{afterFocus:s,beforeBlur:r,afterBlur:i}={}){const u=a(),{emit:p}=u,d=o(),c=t(!1);return l(d,(e=>{e&&e.setAttribute("tabindex","-1")})),N(d,"click",(()=>{var a;null==(a=e.value)||a.focus()})),{wrapperRef:d,isFocused:c,handleFocus:e=>{c.value||(c.value=!0,p("focus",e),null==s||s())},handleBlur:e=>{var a;n(r)&&r(e)||e.relatedTarget&&(null==(a=d.value)?void 0:a.contains(e.relatedTarget))||(c.value=!1,p("blur",e),null==i||i())}}}(Ie,{afterBlur(){var e;H.validateEvent&&(null==(e=null==ie?void 0:ie.validate)||e.call(ie,"blur").catch((e=>ee())))}}),$e=e((()=>{var e;return null!=(e=null==re?void 0:re.statusIcon)&&e})),Pe=e((()=>(null==ie?void 0:ie.validateState)||"")),Me=e((()=>Pe.value&&J[Pe.value])),Ve=e((()=>Se.value?p:d)),_e=e((()=>[O.style,H.inputStyle])),Re=e((()=>[H.inputStyle,ze.value,{resize:H.resize}])),je=e((()=>Q(H.modelValue)?"":String(H.modelValue))),Ae=e((()=>H.clearable&&!ce.value&&!H.readonly&&!!je.value&&(Fe.value||he.value))),Ne=e((()=>H.showPassword&&!ce.value&&!H.readonly&&!!je.value&&(!!je.value||Fe.value))),Te=e((()=>H.showWordLimit&&!!oe.value.maxlength&&("text"===H.type||"textarea"===H.type)&&!ce.value&&!H.readonly&&!H.showPassword)),He=e((()=>je.value.length)),Oe=e((()=>!!Te.value&&He.value>Number(oe.value.maxlength))),We=e((()=>!!W.suffix||!!H.suffixIcon||Ae.value||H.showPassword||Te.value||!!Pe.value&&$e.value)),[Ke,Le]=function(e){const a=t();return[function(){if(null==e.value)return;const{selectionStart:t,selectionEnd:o,value:l}=e.value;if(null==t||null==o)return;const n=l.slice(0,Math.max(0,t)),s=l.slice(Math.max(0,o));a.value={selectionStart:t,selectionEnd:o,value:l,beforeTxt:n,afterTxt:s}},function(){if(null==e.value||null==a.value)return;const{value:t}=e.value,{beforeTxt:o,afterTxt:l,selectionStart:n}=a.value;if(null==o||null==l||null==n)return;let s=t.length;if(t.endsWith(l))s=t.length-l.length;else if(t.startsWith(o))s=o.length;else{const e=o[n-1],a=t.indexOf(e,n-1);-1!==a&&(s=a+1)}e.value.setSelectionRange(s,s)}]}(be);X(ge,(e=>{if(Ge(),!Te.value||"both"!==H.resize)return;const a=e[0],{width:t}=a.contentRect;ke.value={right:`calc(100% - ${t+15+6}px)`}}));const De=()=>{const{type:e,autosize:a}=H;if(j&&"textarea"===e&&ge.value)if(a){const e=R(a)?a.minRows:void 0,t=R(a)?a.maxRows:void 0,o=pe(ge.value,e,t);ze.value={overflowY:"hidden",...o},c((()=>{ge.value.offsetHeight,ze.value=o}))}else ze.value={minHeight:pe(ge.value).minHeight}},Ge=(e=>{let a=!1;return()=>{var t;if(a||!H.autosize)return;null===(null==(t=ge.value)?void 0:t.offsetParent)||(e(),a=!0)}})(De),Ue=()=>{const e=Ie.value,a=H.formatter?H.formatter(je.value):je.value;e&&e.value!==a&&(e.value=a)},Ye=async e=>{Ke();let{value:a}=e.target;H.formatter&&(a=H.parser?H.parser(a):a),we.value||(a!==je.value?(T(D,a),T("input",a),await c(),Ue(),Le()):Ue())},Ze=e=>{T("change",e.target.value)},qe=e=>{T("compositionstart",e),we.value=!0},Je=e=>{var a;T("compositionupdate",e);const t=null==(a=e.target)?void 0:a.value,o=t[t.length-1]||"";we.value=!le(o)},Qe=e=>{T("compositionend",e),we.value&&(we.value=!1,Ye(e))},Xe=()=>{Se.value=!Se.value,ea()},ea=async()=>{var e;await c(),null==(e=Ie.value)||e.focus()},aa=e=>{he.value=!1,T("mouseleave",e)},ta=e=>{he.value=!0,T("mouseenter",e)},oa=e=>{T("keydown",e)},la=()=>{T(D,""),T("change",""),T("clear"),T("input","")};return l((()=>H.modelValue),(()=>{var e;c((()=>De())),H.validateEvent&&(null==(e=null==ie?void 0:ie.validate)||e.call(ie,"change").catch((e=>ee())))})),l(je,(()=>Ue())),l((()=>H.type),(async()=>{await c(),Ue(),De()})),f((()=>{!H.formatter&&H.parser,Ue(),c(De)})),r({input:be,textarea:ge,ref:Ie,textareaStyle:Re,autosize:v(H,"autosize"),focus:ea,blur:()=>{var e;return null==(e=Ie.value)?void 0:e.blur()},select:()=>{var e;null==(e=Ie.value)||e.select()},clear:la,resizeTextarea:De}),(e,a)=>m((x(),b("div",B(S(K),{class:S(L),style:S(_e),role:e.containerRole,onMouseenter:ta,onMouseleave:aa}),[g(" input "),"textarea"!==e.type?(x(),b(h,{key:0},[g(" prepend slot "),e.$slots.prepend?(x(),b("div",{key:0,class:w(S(ye).be("group","prepend"))},[k(e.$slots,"prepend")],2)):g("v-if",!0),z("div",{ref_key:"wrapperRef",ref:Ce,class:w(S(te))},[g(" prefix slot "),e.$slots.prefix||e.prefixIcon?(x(),b("span",{key:0,class:w(S(ye).e("prefix"))},[z("span",{class:w(S(ye).e("prefix-inner"))},[k(e.$slots,"prefix"),e.prefixIcon?(x(),I(S(ae),{key:0,class:w(S(ye).e("icon"))},{default:C((()=>[(x(),I(F(e.prefixIcon)))])),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0),z("input",B({id:S(ue),ref_key:"input",ref:be,class:S(ye).e("inner")},S(oe),{type:e.showPassword?Se.value?"text":"password":e.type,disabled:S(ce),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:H.form,autofocus:H.autofocus,onCompositionstart:qe,onCompositionupdate:Je,onCompositionend:Qe,onInput:Ye,onFocus:a[0]||(a[0]=(...e)=>S(Be)&&S(Be)(...e)),onBlur:a[1]||(a[1]=(...e)=>S(Ee)&&S(Ee)(...e)),onChange:Ze,onKeydown:oa}),null,16,ve),g(" suffix slot "),S(We)?(x(),b("span",{key:1,class:w(S(ye).e("suffix"))},[z("span",{class:w(S(ye).e("suffix-inner"))},[S(Ae)&&S(Ne)&&S(Te)?g("v-if",!0):(x(),b(h,{key:0},[k(e.$slots,"suffix"),e.suffixIcon?(x(),I(S(ae),{key:0,class:w(S(ye).e("icon"))},{default:C((()=>[(x(),I(F(e.suffixIcon)))])),_:1},8,["class"])):g("v-if",!0)],64)),S(Ae)?(x(),I(S(ae),{key:1,class:w([S(ye).e("icon"),S(ye).e("clear")]),onMousedown:P(S(M),["prevent"]),onClick:la},{default:C((()=>[$(S(E))])),_:1},8,["class","onMousedown"])):g("v-if",!0),S(Ne)?(x(),I(S(ae),{key:2,class:w([S(ye).e("icon"),S(ye).e("password")]),onClick:Xe},{default:C((()=>[(x(),I(F(S(Ve))))])),_:1},8,["class"])):g("v-if",!0),S(Te)?(x(),b("span",{key:3,class:w(S(ye).e("count"))},[z("span",{class:w(S(ye).e("count-inner"))},V(S(He))+" / "+V(S(oe).maxlength),3)],2)):g("v-if",!0),S(Pe)&&S(Me)&&S($e)?(x(),I(S(ae),{key:4,class:w([S(ye).e("icon"),S(ye).e("validateIcon"),S(ye).is("loading","validating"===S(Pe))])},{default:C((()=>[(x(),I(F(S(Me))))])),_:1},8,["class"])):g("v-if",!0)],2)],2)):g("v-if",!0)],2),g(" append slot "),e.$slots.append?(x(),b("div",{key:1,class:w(S(ye).be("group","append"))},[k(e.$slots,"append")],2)):g("v-if",!0)],64)):(x(),b(h,{key:1},[g(" textarea "),z("textarea",B({id:S(ue),ref_key:"textarea",ref:ge,class:S(xe).e("inner")},S(oe),{tabindex:e.tabindex,disabled:S(ce),readonly:e.readonly,autocomplete:e.autocomplete,style:S(Re),"aria-label":e.label,placeholder:e.placeholder,form:H.form,autofocus:H.autofocus,onCompositionstart:qe,onCompositionupdate:Je,onCompositionend:Qe,onInput:Ye,onFocus:a[2]||(a[2]=(...e)=>S(Be)&&S(Be)(...e)),onBlur:a[3]||(a[3]=(...e)=>S(Ee)&&S(Ee)(...e)),onChange:Ze,onKeydown:oa}),null,16,me),S(Te)?(x(),b("span",{key:0,style:_(ke.value),class:w(S(ye).e("count"))},V(S(He))+" / "+V(S(oe).maxlength),7)):g("v-if",!0)],64))],16,fe)),[[y,"hidden"!==e.type]])}}),[["__file","input.vue"]]));export{xe as E,le as i};
